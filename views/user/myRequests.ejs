<div class="container">
    <div class="page-header clearfix">
        <div class="pull-left">
            <h5><%= nickName %>'s Requests</h5>
        </div>
        <div class="pull-right">
            <a class="btn btn-primary" href="/bricks/edit"><i class="fa fa-plus"></i> Create Brick Request</a>
        </div>
    </div>
    <table id="bricks-table" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th></th>
            <th>Title</th>
            <th>Created By</th>
            <th>Created Date</th>
        </tr>
        </thead>
    </table>
</div>
<script>
    $(function () {
        var bricks_table = $('#bricks-table').dataTable({
            processing: true,
            serverSide: true,
            ajax: {
                url: '/datatables/bricks',
                type: 'POST',
                data: {
                    where :{
                        createdByNickName : '<%= nickName %>'
                    }
                }
            },
            order: [
                [3, 'desc']
            ],
            columns: [
                {
                    render: function(data, type, row){
                        return '<label><input type="checkbox"></label>';
                    },
                    orderable: false,
                    className: 'check'
                },
                { data : "title" },
                { data : "content" },
                { data : "createdAt" }
            ]
        }).on('click','td', function(e){
            if($(this).find('input[type="checkbox"]').length != 0 ||
                    $(this).hasClass('.dataTables_empty')){
                e.stopPropagation();
            }
        }).on('click','tbody > tr', function(e){
            var brick = bricks_table.row($(this)).data();
            $('#brick-detail-modal').data('brick', brick)
                    .modal('show');
        }).api();
    });
</script>
<%- partial('../brick/detail') %>